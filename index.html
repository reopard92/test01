import React, { useState } from 'react';
import { RefreshCw, Sparkles } from 'lucide-react';

const App = () => {
  const [status, setStatus] = useState('closed'); // 'closed', 'opening', 'open'
  const [shake, setShake] = useState(false);

  // ãƒ‘ãƒƒã‚¯ã®ç”»åƒURLï¼ˆã“ã“ã‚’å¥½ããªç”»åƒã«å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰
  const packImageUrl = "https://images.unsplash.com/photo-1614850523296-d8c1af93d400?q=80&w=1000&auto=format&fit=crop";

  const handleOpen = () => {
    if (status !== 'closed') return;
    
    setShake(true);
    setTimeout(() => setShake(false), 500);

    setStatus('opening');
    setTimeout(() => {
      setStatus('open');
    }, 800);
  };

  const reset = () => {
    setStatus('closed');
  };

  const JaggedEdge = ({ className, style }) => (
    <svg 
      viewBox="0 0 200 20" 
      className={className} 
      style={style}
      preserveAspectRatio="none"
    >
      <path 
        d="M0 20 L20 0 L40 20 L60 0 L80 20 L100 0 L120 20 L140 0 L160 20 L180 0 L200 20 Z" 
        fill="currentColor" 
      />
    </svg>
  );

  return (
    <div className="min-h-screen bg-slate-900 flex flex-col items-center justify-center p-4 font-sans text-white">
      <div className="mb-8 text-center">
        <h1 className="text-2xl font-bold mb-2 flex items-center justify-center gap-2">
          <Sparkles className="text-yellow-400" />
          Card Pack Opener
        </h1>
        <p className="text-slate-400">ãƒ‘ãƒƒã‚¯ã‚’ã‚¿ãƒƒãƒ—ã—ã¦é–‹å°ã—ã¦ãã ã•ã„</p>
      </div>

      <div className="relative w-64 h-96 flex items-center justify-center">
        
        {/* ã‚«ãƒ¼ãƒ‰ï¼ˆä¸­èº«ï¼‰ */}
        <div 
          className={`absolute w-56 h-80 bg-gradient-to-br from-amber-400 via-orange-500 to-red-600 rounded-xl shadow-2xl border-4 border-white/40 flex items-center justify-center transition-all duration-700 ease-out ${
            status === 'open' ? 'scale-110 opacity-100 rotate-0' : 'scale-90 opacity-0 rotate-6'
          }`}
        >
          <div className="text-center">
            <div className="text-5xl mb-4">ğŸ’</div>
            <div className="font-black text-2xl tracking-tighter italic drop-shadow-md">LEGENDARY</div>
          </div>
        </div>

        {/* ãƒ‘ãƒƒã‚¯å…¨ä½“ã‚³ãƒ³ãƒ†ãƒŠ */}
        <div 
          onClick={handleOpen}
          className={`absolute inset-0 cursor-pointer transition-transform duration-300 ${shake ? 'animate-bounce' : ''} ${
            status !== 'closed' ? 'pointer-events-none' : ''
          }`}
        >
          {/* ä¸‹éƒ¨ãƒ‘ãƒ¼ãƒ„ (3/4) */}
          <div 
            className={`absolute bottom-0 left-0 right-0 h-3/4 rounded-b-2xl border-x-4 border-b-4 border-black/20 shadow-xl overflow-hidden transition-all duration-500 ${
              status === 'open' ? 'opacity-0 translate-y-20' : 'opacity-100'
            }`}
            style={{
              backgroundImage: `url(${packImageUrl})`,
              backgroundSize: '100% 133.33%', // å…¨ä½“ã®é«˜ã•ã«åˆã‚ã›ã¦èª¿æ•´
              backgroundPosition: 'bottom center'
            }}
          >
            {/* ç”»åƒã®ä¸Šã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */}
            <div className="absolute inset-0 bg-black/10" />
            
            {/* åˆ‡ã‚Šå£ã®ã‚®ã‚¶ã‚®ã‚¶ï¼ˆä¸‹ï¼‰- èƒŒæ™¯ã¨åŒã˜è‰²ã«ã™ã‚‹ã¨é¦´æŸ“ã¿ã¾ã™ */}
            <JaggedEdge className="absolute top-0 left-0 w-full h-4 text-slate-900/40 -translate-y-[1px]" />
            
            {/* ãƒ­ã‚´ãªã©ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãƒ†ã‚­ã‚¹ãƒˆ */}
            <div className="absolute bottom-10 left-0 right-0 text-center pointer-events-none">
                <div className="text-white font-black text-2xl drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] italic">BOOSTER</div>
                <div className="text-white/80 text-xs font-bold tracking-[0.2em]">PREMIUM EDITION</div>
            </div>
          </div>

          {/* ä¸Šéƒ¨ãƒ‘ãƒ¼ãƒ„ (1/4) */}
          <div 
            className={`absolute top-0 left-0 right-0 h-1/4 rounded-t-2xl border-x-4 border-t-4 border-black/20 shadow-lg transition-all duration-700 cubic-bezier(0.23, 1, 0.32, 1) ${
              status === 'opening' || status === 'open' 
                ? '-translate-y-64 -translate-x-16 -rotate-45 opacity-0' 
                : 'translate-y-0 opacity-100'
            }`}
            style={{
              backgroundImage: `url(${packImageUrl})`,
              backgroundSize: '100% 400%', // å…¨ä½“ã®é«˜ã•ã®4å€
              backgroundPosition: 'top center'
            }}
          >
            {/* ç”»åƒã®ä¸Šã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */}
            <div className="absolute inset-0 bg-black/10" />
            
            {/* åˆ‡ã‚Šå£ã®ã‚®ã‚¶ã‚®ã‚¶ï¼ˆä¸Šï¼‰ */}
            <JaggedEdge className="absolute bottom-0 left-0 w-full h-4 text-slate-900/40 rotate-180 translate-y-[1px]" />
          </div>
        </div>

      </div>

      {status === 'open' && (
        <button
          onClick={reset}
          className="mt-12 flex items-center gap-2 bg-white/10 hover:bg-white/20 px-6 py-2 rounded-full transition-colors text-sm font-medium border border-white/10"
        >
          <RefreshCw size={16} />
          ãƒªã‚»ãƒƒãƒˆ
        </button>
      )}

      <style>{`
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          25% { transform: translateY(-8px) rotate(-0.5deg); }
          75% { transform: translateY(8px) rotate(0.5deg); }
        }
        .animate-bounce {
          animation: bounce 0.15s ease-in-out infinite;
        }
      `}</style>
    </div>
  );
};

export default App;
